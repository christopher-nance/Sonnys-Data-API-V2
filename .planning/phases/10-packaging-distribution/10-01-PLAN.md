---
phase: 10-packaging-distribution
plan: 01
type: execute
---

<objective>
Finalize the sonnys-data-client package for pip-installable distribution from GitHub — add standard logging, write usage documentation, and verify clean build/install experience.

Purpose: Complete the final PROJECT.md requirements (logging, pip install from GitHub) and ensure the package is ready for consumption by analytics tools, internal apps, and AI agents.
Output: Working pip-installable package with debug logging, comprehensive README, and verified build artifacts.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/phase-prompt.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-batch-job-system/09-01-SUMMARY.md

# Key source files:
@src/sonnys_data_client/__init__.py
@src/sonnys_data_client/_client.py
@src/sonnys_data_client/_version.py
@pyproject.toml
@README.md

**Tech stack available:** hatchling, requests, pydantic, pytest, ruff
**Established patterns:** src-layout, underscore-prefixed internals, context-manager protocol, cached_property resource accessors
**Constraining decisions:**
- [Phase 01]: hatchling build system, src layout, py.typed marker
- [Phase 01]: Underscore-prefixed internals, public API via __init__.py
- [Phase 02]: Keyword-only args pattern
- [PROJECT.md]: "Python standard logging (debug level shows requests/responses, configurable by caller)"
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Python standard logging to client</name>
  <files>src/sonnys_data_client/_client.py</files>
  <action>
Add `import logging` and create a module-level logger: `logger = logging.getLogger("sonnys_data_client")`.

In `_request()`, add logging at these points:
- **Before request:** `logger.debug("Request: %s %s params=%s", method, path, params)` — log method, path, and params at DEBUG level
- **After successful response:** `logger.debug("Response: %s %s status=%d elapsed=%.3fs", method, path, response.status_code, response.elapsed.total_seconds())` — log status and timing at DEBUG
- **On 429 retry:** `logger.warning("Rate limited (429), retry %d/%d after %.1fs", attempt + 1, self._max_retries, base_delay * (2**attempt))` — log retries at WARNING
- **On rate limiter wait:** `logger.debug("Rate limiter: waiting %.3fs", wait)` — log pre-request throttle waits at DEBUG

Use %-style formatting (not f-strings) in logger calls for lazy evaluation. Do NOT add logging to any other files — keep it focused on the HTTP boundary in _client.py.

Do NOT add a NullHandler or any handler configuration — callers configure their own handlers per Python logging best practices.
  </action>
  <verify>python -c "import logging; logging.basicConfig(level=logging.DEBUG); from sonnys_data_client import SonnysClient; print('Logger configured:', logging.getLogger('sonnys_data_client'))"</verify>
  <done>Logger "sonnys_data_client" exists, _client.py has 4 log points (2 DEBUG request/response, 1 WARNING retry, 1 DEBUG rate limiter), no handlers added by library</done>
</task>

<task type="auto">
  <name>Task 2: Write README.md with installation and usage documentation</name>
  <files>README.md</files>
  <action>
Replace the one-liner README.md with comprehensive usage documentation. Structure:

## sonnys-data-client
One-line description.

## Installation
```bash
pip install git+https://github.com/WashU-CarWash/sonnys-data-client.git
```

## Quick Start
Show SonnysClient with context manager, basic `client.transactions.list(start_date=..., end_date=...)` call.

## Resources
Table listing all 8 resources with their methods:
- `client.customers.list() / .get(customer_id)`
- `client.items.list()`
- `client.employees.list() / .get(employee_id)` (get returns clock entries)
- `client.sites.list()`
- `client.giftcards.list() / .get(account_id)`
- `client.washbooks.list() / .get(account_id)`
- `client.recurring.list() / .get(account_id) / .status_history()`
- `client.transactions.list() / .list_by_type(item_type) / .get(trans_id) / .list_v2() / .load_job()`

## Error Handling
Show try/except with SonnysError base, mention AuthError, RateLimitError, ValidationError, NotFoundError, ServerError. Show that rate limiting is automatic (built-in 429 retry).

## Logging
Show how caller enables debug logging:
```python
import logging
logging.getLogger("sonnys_data_client").setLevel(logging.DEBUG)
logging.basicConfig()
```

## Multi-Site Usage
Show instantiating two clients with different credentials (WashU + Icon use case from PROJECT.md).

## Requirements
Python 3.10+, requests, pydantic v2.

Keep it concise and practical — code examples should be copy-pasteable. Use the actual API parameter names from the codebase (start_date, end_date, limit, offset, etc.). Do NOT invent parameters — check source files for actual method signatures.
  </action>
  <verify>python -c "import ast; print('README exists and is non-trivial')" && wc -l README.md</verify>
  <done>README.md contains Installation, Quick Start, Resources, Error Handling, Logging, and Multi-Site sections with code examples</done>
</task>

<task type="auto">
  <name>Task 3: Build wheel and verify clean install</name>
  <files>pyproject.toml</files>
  <action>
1. Run `pip install hatch` if not available, then `hatch build` to produce wheel and sdist in dist/
2. Create a temporary venv, install the wheel into it, verify:
   - `from sonnys_data_client import SonnysClient, __version__` works
   - `from sonnys_data_client import AuthError, RateLimitError` works
   - `__version__` returns "0.1.0"
   - All 8 resource classes importable
   - All 10 exception classes importable
3. Run existing test suite to confirm nothing broke: `python -m pytest`
4. Clean up temporary venv after verification

If hatch build reveals any issues with pyproject.toml (missing fields, wrong paths), fix them. The `nul` file in root is a Windows artifact — add it to .gitignore if not already there (it is already listed).

Do NOT change the version number — keep 0.1.0. Do NOT add GitHub URLs to pyproject.toml yet (repo URL depends on where user pushes).
  </action>
  <verify>hatch build && python -m pytest -q</verify>
  <done>dist/ contains .whl and .tar.gz, wheel installs cleanly in fresh venv, all imports succeed, 110 tests pass</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `python -m pytest` — all 110 tests pass
- [ ] `hatch build` produces wheel and sdist without errors
- [ ] Fresh venv install of wheel succeeds
- [ ] `from sonnys_data_client import SonnysClient` works in fresh venv
- [ ] Logger "sonnys_data_client" exists and logs at DEBUG level
- [ ] README.md has installation, quickstart, resources, error handling, logging sections
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Package builds and installs cleanly
- Logging works at DEBUG level for requests/responses
- README provides complete usage documentation
- Phase 10 complete — project fully delivered
</success_criteria>

<output>
After completion, create `.planning/phases/10-packaging-distribution/10-01-SUMMARY.md`:

# Phase 10 Plan 1: Package Finalization Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- [Files with descriptions]

## Decisions Made

[Key decisions]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Project complete — all 10 phases delivered.
</output>
