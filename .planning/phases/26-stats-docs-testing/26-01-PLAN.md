---
phase: 26-stats-docs-testing
plan: 01
type: execute
---

<objective>
Create a comprehensive stats usage guide and integrate the stats module into existing documentation infrastructure.

Purpose: Enable developers and AI agents to discover and use `client.stats.*` methods through the documentation site and README, completing the v1.2 documentation surface.
Output: Stats usage guide page, updated mkdocs nav, API reference entries for StatsResource and stats models, README stats section.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase summaries (stats implementation context):
@.planning/phases/25-stats-report/25-01-SUMMARY.md
@.planning/phases/19-stats-foundation/19-02-SUMMARY.md

# Source files to document:
@src/sonnys_data_client/resources/_stats.py
@src/sonnys_data_client/types/_stats.py
@src/sonnys_data_client/_date_utils.py

# Existing documentation patterns to follow:
@docs/guides/recurring.md
@docs/guides/transactions.md
@docs/api/resources.md
@docs/api/models.md
@mkdocs.yml
@README.md

**Tech stack available:** MkDocs Material + mkdocstrings, Google docstrings
**Established patterns:** Per-resource usage guide with method table, examples, model field tables; mkdocstrings ::: directives for API reference; README resource table
**Constraining decisions:**
- StatsResource extends BaseResource only (not ListableResource) — it computes analytics, not wrapping REST endpoints
- All stat methods accept (start, end) as ISO-8601 strings or datetime objects
- report() makes 4 API calls vs 7 from individual methods — document this efficiency
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create stats usage guide</name>
  <files>docs/guides/stats.md</files>
  <action>
Create `docs/guides/stats.md` following the structure of existing guides (recurring.md, transactions.md). Include:

1. **Intro paragraph** — Explain that `client.stats` provides computed business analytics (not raw API data). Mention it fetches data from existing resources and aggregates locally.

2. **Choosing the Right Method table** — All 6 public methods with returns, use-when, and API calls columns:
   - `total_sales(start, end)` → SalesResult — Revenue breakdown by transaction type — 1 API call
   - `total_washes(start, end)` → WashResult — Wash volume by category — 2 API calls
   - `retail_wash_count(start, end)` → int — Retail wash transactions only — 1 API call
   - `new_memberships_sold(start, end)` → int — Membership activations — 1 API call
   - `conversion_rate(start, end)` → ConversionResult — Membership conversion KPI — 2 API calls
   - `report(start, end)` → StatsReport — All KPIs in one call — 4 API calls (vs 7 individual)

3. **Date Range Input section** — Document that all methods accept ISO-8601 strings ("2026-01-01") or datetime objects. Show both formats in examples. Note naive datetimes are treated as UTC.

4. **Methods section** — For each of the 6 methods:
   - Method signature heading (like `### total_sales(start, end) -> SalesResult`)
   - Short description
   - Code example showing usage and accessing result fields
   - For methods returning models (total_sales, total_washes, conversion_rate, report): include a "Result Fields" table listing each field, its type, and description

5. **Performance Tips section** — Explain report() efficiency (4 calls vs 7). Advise using report() when needing multiple KPIs, individual methods when needing just one.

Do NOT add emojis. Use the same markdown formatting patterns as recurring.md (code fences, tables, headings).
  </action>
  <verify>File exists at docs/guides/stats.md with all 6 methods documented, each with code examples</verify>
  <done>Stats guide covers all 6 public methods with examples, model field tables, date range docs, and performance tips</done>
</task>

<task type="auto">
  <name>Task 2: Integrate stats into documentation site and README</name>
  <files>mkdocs.yml, docs/api/resources.md, docs/api/models.md, README.md</files>
  <action>
Four files to update:

1. **mkdocs.yml** — Add `Stats: guides/stats.md` to the Guides nav section. Place it after "Advanced Patterns" (last guide entry before the advanced topics, or at the end of Guides). The stats guide is a resource guide so place it after Transactions and before Error Handling.

2. **docs/api/resources.md** — Add StatsResource mkdocstrings entry after the Transactions section:
```
::: sonnys_data_client.resources.StatsResource
    options:
      show_source: false
      heading_level: 3
```

3. **docs/api/models.md** — Add a new "## Stats" section after Transactions with mkdocstrings entries for all 4 stats models:
```
::: sonnys_data_client.types.SalesResult
::: sonnys_data_client.types.WashResult
::: sonnys_data_client.types.ConversionResult
::: sonnys_data_client.types.StatsReport
```
Each with `show_source: false` and `heading_level: 3`.

4. **README.md** — Two changes:
   a. Add `client.stats` row to the Resources table (after `client.transactions`):
      `| client.stats | total_sales(start, end), total_washes(start, end), retail_wash_count(start, end), new_memberships_sold(start, end), conversion_rate(start, end), report(start, end) |`
   b. Add a "### Stats" section after the Transactions section in the Resources area with a brief example:
      ```python
      result = client.stats.total_sales("2026-01-01", "2026-01-31")
      print(f"Total revenue: ${result.total:.2f}")
      print(f"Membership sales: ${result.recurring_plan_sales:.2f}")

      # All KPIs in one efficient call (4 API calls instead of 7)
      report = client.stats.report("2026-01-01", "2026-01-31")
      ```
   c. Add `client.stats` row to the Table of Contents under Resources.
  </action>
  <verify>mkdocs.yml has Stats entry in nav; docs/api/resources.md has StatsResource directive; docs/api/models.md has 4 stats model directives; README.md has stats in resource table and stats section</verify>
  <done>Stats fully integrated into mkdocs nav, API reference (resource + 4 models), and README (ToC + resource table + usage section)</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `docs/guides/stats.md` exists with all 6 methods documented
- [ ] `mkdocs.yml` nav includes Stats guide
- [ ] `docs/api/resources.md` includes StatsResource directive
- [ ] `docs/api/models.md` includes SalesResult, WashResult, ConversionResult, StatsReport directives
- [ ] `README.md` has stats in resource table and usage section
- [ ] `python -c "import sonnys_data_client"` succeeds (no import broken)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Stats module fully discoverable through docs site and README
- Documentation follows established patterns from v1.1
</success_criteria>

<output>
After completion, create `.planning/phases/26-stats-docs-testing/26-01-SUMMARY.md`
</output>
