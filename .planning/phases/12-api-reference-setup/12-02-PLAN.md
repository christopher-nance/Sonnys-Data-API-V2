---
phase: 12-api-reference-setup
plan: 02
type: execute
---

<objective>
Populate API reference pages with mkdocstrings autodoc directives and deploy to GitHub Pages.

Purpose: Make all public API surfaces browsable as rendered documentation, deployed and accessible via GitHub Pages.
Output: Complete API reference docs deployed to GitHub Pages with auto-generated content from docstrings.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-api-reference-setup/12-01-SUMMARY.md

# Key files:
@mkdocs.yml
@docs/index.md
@src/sonnys_data_client/__init__.py
@src/sonnys_data_client/_client.py
@src/sonnys_data_client/_resources.py
@src/sonnys_data_client/_exceptions.py
@src/sonnys_data_client/resources/__init__.py
@src/sonnys_data_client/types/__init__.py

**Tech stack available:** mkdocs-material, mkdocstrings[python], hatchling, pydantic v2
**Established patterns:** src layout, mkdocstrings Python handler with paths: [src]
**Constraining decisions:**
- [Phase 12-01]: mkdocs.yml configured with material theme and mkdocstrings plugin
- [Phase 11]: README already has method signatures and examples for all 8 resources
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create API reference pages with autodoc directives</name>
  <files>docs/api/client.md, docs/api/resources.md, docs/api/models.md, docs/api/exceptions.md</files>
  <action>Replace the placeholder pages created in Plan 01 with full mkdocstrings autodoc content:

**docs/api/client.md** — The main client class:
```markdown
# Client

::: sonnys_data_client.SonnysClient
    options:
      members:
        - __init__
        - customers
        - items
        - employees
        - giftcards
        - sites
        - transactions
        - washbooks
        - recurring
        - close
        - __enter__
        - __exit__
```

**docs/api/resources.md** — All 8 resource classes plus base classes:
- Brief intro explaining the resource pattern (client.resource.method())
- `::: sonnys_data_client._resources.BaseResource`
- `::: sonnys_data_client._resources.ListableResource`
- `::: sonnys_data_client._resources.GettableResource`
- Then each concrete resource:
  - `::: sonnys_data_client.resources.Customers`
  - `::: sonnys_data_client.resources.Items`
  - `::: sonnys_data_client.resources.Employees`
  - `::: sonnys_data_client.resources.Sites`
  - `::: sonnys_data_client.resources.Giftcards`
  - `::: sonnys_data_client.resources.Washbooks`
  - `::: sonnys_data_client.resources.RecurringAccounts`
  - `::: sonnys_data_client.resources.Transactions`
- Use `show_source: false` and `heading_level: 2` for each directive

**docs/api/models.md** — All Pydantic response models:
- Brief intro explaining these are Pydantic v2 models with camelCase aliases
- Group by resource with H2 headings:
  - Customers: CustomerListItem, Customer
  - Items: Item
  - Employees: EmployeeListItem, Employee, ClockEntry
  - Sites: Site
  - Giftcards: GiftcardListItem
  - Washbooks: WashbookListItem, Washbook, WashbookTag, WashbookVehicle
  - Recurring: RecurringListItem, Recurring, RecurringStatusChange, RecurringModification
  - Transactions: TransactionListItem, TransactionV2ListItem, Transaction, TransactionJobItem, TransactionTender, TransactionItem, TransactionDiscount
- Use `::: sonnys_data_client.types.ModelName` for each (verify the types __init__.py exports them)
- If types aren't exported from types/__init__.py, use full paths like `::: sonnys_data_client.types._transactions.TransactionListItem`

**docs/api/exceptions.md** — Exception hierarchy:
- Brief intro with the hierarchy tree (SonnysError → APIError → APIStatusError → AuthError etc.)
- `::: sonnys_data_client.SonnysError`
- `::: sonnys_data_client.APIError`
- `::: sonnys_data_client.APIConnectionError`
- `::: sonnys_data_client.APITimeoutError`
- `::: sonnys_data_client.APIStatusError`
- `::: sonnys_data_client.AuthError`
- `::: sonnys_data_client.RateLimitError`
- `::: sonnys_data_client.ValidationError`
- `::: sonnys_data_client.NotFoundError`
- `::: sonnys_data_client.ServerError`

Check the types/__init__.py to see what's exported. If models aren't re-exported there, either add re-exports or use the private module paths in the directives.</action>
  <verify>Run `python -m mkdocs build --strict` — should succeed with all 4 reference pages rendering content from docstrings. Check the build output for warnings about missing modules or unresolved references.</verify>
  <done>All 4 API reference pages have mkdocstrings autodoc directives, mkdocs build --strict passes, rendered HTML shows class signatures, method docs, and Pydantic model fields</done>
</task>

<task type="auto">
  <name>Task 2: Deploy documentation to GitHub Pages</name>
  <files>(none - deployment command)</files>
  <action>Deploy the documentation site to GitHub Pages:

1. Run `python -m mkdocs gh-deploy --strict` to build and push to the gh-pages branch
2. If GitHub Pages is not yet enabled for the repo, use `gh api` to enable it:
   `gh api repos/{owner}/{repo}/pages -X POST -f "source[branch]=gh-pages" -f "source[path]=/"` (may return 409 if already enabled — that's fine)
3. Capture the deployed URL from the gh-deploy output

If gh-deploy fails due to git remote issues, check that `origin` remote exists and the user has push access. If auth gate is hit, create a dynamic checkpoint.

Do NOT force push or modify the main branch — gh-deploy only touches the gh-pages branch.</action>
  <verify>Run `gh api repos/{owner}/{repo}/pages` to check Pages status. curl the deployed URL and confirm it returns 200.</verify>
  <done>Documentation deployed to GitHub Pages, gh-pages branch exists with built docs</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Auto-generated API reference documentation deployed to GitHub Pages</what-built>
  <how-to-verify>
    1. Visit the GitHub Pages URL (shown in deploy output)
    2. Confirm landing page loads with project description and feature highlights
    3. Navigate to API Reference > Client — verify SonnysClient class renders with constructor params and resource accessors
    4. Navigate to API Reference > Resources — verify all 8 resource classes show with their methods (list, get, etc.)
    5. Navigate to API Reference > Models — verify Pydantic models render with field names and types
    6. Navigate to API Reference > Exceptions — verify exception hierarchy renders
    7. Confirm navigation works (sidebar, tabs, search)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 4 API reference pages have autodoc directives
- [ ] `python -m mkdocs build --strict` passes clean
- [ ] Documentation deployed to GitHub Pages
- [ ] Human verified the deployed site renders correctly
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- API reference pages render auto-generated content from docstrings
- Documentation accessible via GitHub Pages URL
- Phase 12 complete
</success_criteria>

<output>
After completion, create `.planning/phases/12-api-reference-setup/12-02-SUMMARY.md`
</output>
